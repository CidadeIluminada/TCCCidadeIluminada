{% extends 'admin/model/edit.html' %}

{% block head %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
{% endblock %}

{% block body %}
    <h1>Ordem de Serviço #{{ model.id }} </h1>
    <a style="margin-bottom: 20px;" class="btn btn-default" href="{{ url_for('ordemservico.mostrar_pdf', ordem_servico_id=model.id) }}">
        <i class="fa fa-file-pdf-o"></i>
        Baixar PDF
    </a>
    <h2>Itens da Ordem de Serviço</h2>
    <table class="table table-striped table-bordered table-hover model-list">
        <thead>
            <th>
                Poste
            </th>
            <th>
                Serviço realizado
            </th>
        </thead>
        <tbody>
            {% for row in model.itens_manutencao %}
            <tr>
                <td>
                    {{ row.item_manutencao.poste }}
                </td>
                <td>
                    {% if row.servico_feito == None %}
                        <form class="form-inline" action="{{ url_for('ordemservico.atualizar_item_manutencao') }}" method="POST">
                            <input type="hidden" value="{{ model.id }}" name="ordem_servico_id">
                            <input type="hidden" value="{{ row.id }}" name="item_manutencao_ordem_servico_id">
                            <button class="btn btn-success" type="submit" name="feito" value="true">
                                <i class="glyphicon glyphicon-ok"></i>
                            </button>
                            <button class="btn btn-danger" name="feito" type="submit" value="false">
                                <i class="glyphicon glyphicon-remove"></i>
                            </button>
                        </form>
                    {% else %}
                        {% if row.servico_feito == True %}
                            <i class="glyphicon glyphicon-ok"></i>
                        {% else %}
                            <i class="glyphicon glyphicon-remove"></i>
                        {% endif %}
                    {% endif %}
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="999">
                {% block empty_list_message %}
                    <div class="text-center">
                        {{ admin_view.get_empty_list_message() }}
                    </div>
                {% endblock %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
